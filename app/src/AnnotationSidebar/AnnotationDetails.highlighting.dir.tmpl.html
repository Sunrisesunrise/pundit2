<div class="pnd-annotation-details-wrap pnd-annotation-highlight pnd-ignore">

    <!-- Collapsed view of the annotation -->
    <div class="pnd-annotation-collapsed pnd-annotation-details-header pnd-annotation-details-top"
         ng-click="toggleAnnotation()"
         ng-if="!annotation.expanded"
         ng-class="{'pnd-annotation-details-broken': annotation.broken, 'pnd-annotation-details-ghosted': annotation.ghosted}">

        <div class="pnd-annotation-collapsed-subject">
            <span>{{annotation.mainItem.description}}</span>
        </div>
    </div>

    <!-- Expanded view of the annotation -->
    <div class="pnd-annotation-expanded pnd-annotation-details-container"
         ng-click="toggleAnnotation()"
         ng-if="annotation.expanded">

        <!-- All'annotazione apert andrebbe aggiunto ng-click="toggleAnnotation()"
            ma va fatto in modo che i pulsanti interni siamo cliccabili e non triggerino
            il toggleAnnotation() -->

        <!-- Metadata -->
        <div class="pnd-annotation-details-meta"
             ng-init="meta = false">

            <img class="pnd-annotation-user-thumb" src="http://placehold.it/30x30" alt="{{::annotation.creatorName}}"/>
            <span class="pnd-annotation-user-name">
                {{::annotation.creatorName}}
            </span>
            <span class="pnd-annotation-metadata">
                {{::annotation.created | date : 'd MMM y'}} Â· in <span class="pnd-annotation-notebook-name">{{annotation.notebookName}}</span>
            </span>

        </div>

        <!-- Annotation data -->
        <div class="pnd-annotation-details-data">

            <!-- Annotated text fragment -->
            <div class="pnd-annotation-annotated-fragment">
                <span>{{annotation.mainItem.description}}</span>
            </div>

        </div>

        <!-- Annotation functions buttons (Edit, Cancel, Share, Reply, Like...) -->
        <div 
            class="pnd-annotation-details-buttons"
            ng-show="isUserToolShowed()">
            <div class="pnd-annotation-details-footer">
                <button
                        type="button"
                        class="pnd-delete"
                        ng-click="deleteAnnotation($event)">
                    <span class="pnd-icon-trash"></span>
                    Delete
                </button>
            </div>
        </div>

    </div>

</div>